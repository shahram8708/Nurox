{% extends 'base.html' %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg border-0 rounded">
                <div class="card-header text-center bg-warning text-dark">
                    <h4 class="mb-0">Edit Your Story</h4>
                </div>
                <div class="card-body p-5">
                    <form method="POST">
                        <div class="mb-4">
                            <label for="content" class="form-label fs-5">Story Content</label>
                            <textarea class="form-control" id="content" name="content" rows="6"
                                placeholder="Update your story here...">{{ story.content }}</textarea>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-6">
                                <label for="background_image" class="form-label fs-5">Background Color</label>
                                <input type="color" class="form-control form-control-color" id="background_image"
                                    name="background_image" value="{{ story.background_image }}">
                            </div>
                            <div class="col-md-6">
                                <label for="text_color" class="form-label fs-5">Text Color</label>
                                <input type="color" class="form-control form-control-color" id="text_color"
                                    name="text_color" value="{{ story.text_color }}">
                            </div>
                        </div>

                        <button type="submit" class="btn btn-lg btn-warning w-100">Save Changes</button>
                    </form>
                </div>
            </div>


            <div class="card shadow-lg border-0 rounded mt-5">
                <div class="card-header bg-dark text-white">
                    <h5 class="mb-0">Story Preview</h5>
                </div>
                <div id="story-preview" class="card-body p-4"
                    style="min-height: 150px; background-color: {{ story.background_image }}; color: {{ story.text_color }};">
                    <h5>{{ story.user.username }}</h5>
                    <p>{{ story.content | replace("\n", "<br>") | safe }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>

    function updatePreview() {
        var backgroundColor = document.getElementById('background_image').value;
        var textColor = document.getElementById('text_color').value;
        var previewDiv = document.getElementById('story-preview');

        previewDiv.style.backgroundColor = backgroundColor;
        previewDiv.style.color = textColor;
    }


    document.getElementById('background_image').addEventListener('input', updatePreview);
    document.getElementById('text_color').addEventListener('input', updatePreview);


    window.onload = updatePreview;
</script>
{% endblock %}